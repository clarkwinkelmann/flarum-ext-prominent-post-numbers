(()=>{var t={n:e=>{var r=e&&e.__esModule?()=>e.default:()=>e;return t.d(r,{a:r}),r},d:(e,r)=>{for(var n in r)t.o(r,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:r[n]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};(()=>{"use strict";t.r(e),t.d(e,{filterPostMentions:()=>h});const r=flarum.core.compat["forum/app"];var n=t.n(r);const o=flarum.core.compat["common/extend"],s=flarum.core.compat["common/utils/extractText"];var a=t.n(s);const i=flarum.core.compat["common/components/Link"];var c=t.n(i);const u=flarum.core.compat["forum/components/CommentPost"];var l=t.n(u);const d=flarum.core.compat["forum/components/PostPreview"];var p=t.n(d);function f(t){return m("span.ProminentPostNumber",(n().forum.attribute("prominentPostNumberFormat")||"").replace("{number}",t.number()+""))}function h(t){var e=n().store.getById("posts",t.getAttribute("id"));e&&(e.user()||t.setAttribute("displayname",""))}n().initializers.add("prominent-post-numbers",(function(){(0,o.extend)(l().prototype,"headerItems",(function(t){var e=this.attrs.post;t.add("number",f(e))})),(0,o.extend)(p().prototype,"view",(function(t){var e=this;t.children.forEach((function(t){t&&t.attrs&&t.attrs.className&&-1!==t.attrs.className.indexOf("PostPreview-content")&&(e.attrs.post.user()||t.children.forEach((function(e,r){e&&"span"===e.tag&&e.text===a()(n().translator.trans("core.lib.username.deleted_text"))&&t.children.splice(r,1)})),t.children.splice(1,0,f(e.attrs.post),{tag:"#",children:" "}))}))})),(0,o.extend)(c().prototype,"view",(function(t){if("data-number"in this.attrs){var e=parseInt(this.attrs["data-number"]),r=n().route("discussion",{id:""});if(this.attrs.href&&0===this.attrs.href.indexOf(r)){var o=this.attrs.href.substr(r.length).split("/")[0],s=n().store.all("posts").find((function(t){var r;return t.number()===e&&(null==(r=t.discussion())?void 0:r.slug())===o}));s&&(t.children.unshift(f(s)," "),s.user()||t.children.forEach((function(e,r){e&&"span"===e.tag&&e.text===a()(n().translator.trans("core.lib.username.deleted_text"))&&t.children.splice(r,1)})))}}}))}))})(),module.exports=e})();
//# sourceMappingURL=forum.js.map